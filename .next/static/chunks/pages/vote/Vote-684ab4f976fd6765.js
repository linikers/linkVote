(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{5987:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/Vote",function(){return a(87)}])},87:function(t,e,a){"use strict";a.r(e),a.d(e,{Vote:function(){return c}});var r=a(5893),i=a(7294),o=a(4246),n=a(4466),s=a(1388),l=a(355),m=a(8163);function c(t){let{onOpenSnackBar:e}=t,[a,c]=(0,i.useState)(0),[d,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)([]),[x,g]=(0,i.useState)({anatomy:0,creativity:0,pigmentation:0,traces:0,readability:0,visualImpact:0}),[y,b]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{u(!0);let t=await fetch("/api/list");if(!t.ok)throw Error("Erro ao listar competidores");let e=await t.json();h(e);let a=e.reduce((t,e)=>t+e.votes,0);c(a)}catch(t){console.error("Erro ao buscar dados:",t),e("Erro ao listar competidores")}finally{u(!1)}})()},[e]);let v=t=>{g({...x,[t.target.name]:parseInt(t.target.value,10)})},f=async t=>{b(t);try{u(!0);let a=await fetch("/api/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,userId:t})});if(!a.ok)throw Error("Erro ao registrar voto");let r=await a.json(),i=p.map(t=>t.id===r.id?r:t);h(i);let o=i.reduce((t,e)=>t+e.votes,0);c(o),g({anatomy:0,creativity:0,pigmentation:0,traces:0,readability:0,visualImpact:0}),e("Voto registrado com sucesso")}catch(t){console.error("Erro ao votar:",t),e("Erro ao registrar voto")}finally{u(!1),b(null)}};return d?(0,r.jsx)(o.Z,{children:"Carregando..."}):(0,r.jsxs)(n.ZP,{container:!0,sx:{margin:"2rem",display:"flex",flexDirection:"column",alignItems:"center",minWidth:"320px"},children:[(0,r.jsx)(n.ZP,{item:!0,children:(0,r.jsx)(o.Z,{variant:"h4",gutterBottom:!0,style:{marginBottom:"6rem"},children:"Vote Agora"})}),(0,r.jsx)("form",{style:{width:"100%"},onSubmit:t=>{t.preventDefault()},children:(0,r.jsx)(n.ZP,{container:!0,spacing:3,sx:{width:"100%"},children:p.length>0?p.map(t=>(0,r.jsxs)(n.ZP,{xs:12,item:!0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"#6c757d",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.4)",transition:"transform 0.3s, box-shadow 0.3s",minWidth:"320px","&:hover":{transform:"scale(1.02)",boxShadow:"0 16px rgba(0,0,0, 0.2)"}},children:[(0,r.jsx)(o.Z,{style:{fontWeight:"bold"},children:t.name}),(0,r.jsx)(o.Z,{style:{color:"#757575"},children:t.work}),(0,r.jsx)(s.Z,{label:"Anatomia",type:"number",inputProps:{min:1,max:10},value:x.anatomy,onChange:v,name:"anatomy",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(s.Z,{label:"Criatividade",type:"number",inputProps:{min:1,max:10},value:x.creativity,onChange:v,name:"creativity",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(s.Z,{label:"Pigmenta\xe7\xe3o",type:"number",inputProps:{min:1,max:10},value:x.pigmentation,onChange:v,name:"pigmentation",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(s.Z,{label:"Tra\xe7os",type:"number",inputProps:{min:1,max:10},value:x.traces,onChange:v,name:"traces",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(s.Z,{label:"Legibilidade",type:"number",inputProps:{min:1,max:10},value:x.readability,onChange:v,name:"readability",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(s.Z,{label:"Impacto Visual",type:"number",inputProps:{min:1,max:10},value:x.visualImpact,onChange:v,name:"visualImpact",style:{marginBottom:"0.5rem"},fullWidth:!0}),(0,r.jsx)(l.Z,{variant:"determinate",value:a>0?t.votes/a*100:0,sx:{backgroundColor:"#414141",marginTop:"0.5rem",height:"10px",borderRadius:"8px","& .MuiLinearProgress-bar":{backgroundColor:"#3f51b5"}}}),(0,r.jsxs)(o.Z,{variant:"caption",style:{display:"block",marginTop:"0.5rem"},children:[t.votes," votos (",a>0?(t.votes/a*100).toFixed(2):0," %)"]}),(0,r.jsx)(m.Z,{variant:"contained",color:"primary",onClick:()=>f(t.id),style:{marginTop:"1rem"},disabled:y===t.id,children:"Votar"})]},t.id)):(0,r.jsx)(o.Z,{variant:"body1",children:"Nenhum participante cadastrado"})})})]})}}},function(t){t.O(0,[836,851,158,888,774,179],function(){return t(t.s=5987)}),_N_E=t.O()}]);